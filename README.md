# qieyun-js

《切韻》音系 JavaScript 函式庫

## 用法

```html
<script src="https://sgalal.github.io/qieyun-js/brogue2.js"></script>
```

文件大小小於 0.8 MB，壓縮後大小小於 0.5 MB，適合在網頁中使用。

姊妹項目：《切韻》音系 SQLite 資料庫 \([sgalal/qieyun-sqlite](https://github.com/sgalal/qieyun-sqlite)\)。

## API

**1. 由漢字查出對應的小韻號和解釋**

```javascript
>>> char_entities['過'];
[ [739, "經也又過所也釋名曰過所至關津以示之也或曰傳過也移所在識以爲信也亦姓風俗通云過國夏諸侯後因爲氏漢有兖州刺史過栩"]
, [2837, "誤也越也責也度也古臥切七"]
]
```

結果為二維數組。對於數組中的每一項，第一個元素為對應的小韻號，第二個元素為解釋。

**2. 查出小韻號對應的音韻地位**

```javascript
>>> get音韻地位(739);
"見合一戈平"
>>> get母(739);
"見"
>>> get韻賅上去入(2837);
"戈"
```

此類函數包括：`get母`, `get開合`, `get等`, `get等漢字`, `get韻`, `get韻賅上去`, `get韻賅上去入`, `get攝`, `get重紐`, `get聲`, `get音韻地位`。

其中，參數為小韻號 (1 ≤ i ≤ 3874)。

**3. 判斷某個小韻是否屬於給定的音韻地位**

```javascript
>>> equal組(739, '精');
false
>>> equal等(739, 1);
true
>>> equal等(739, '一');
true
```

此類函數包括：`equal組`, `equal等`, `equal聲`。

其中，第一個參數為小韻號 (1 ≤ i ≤ 3874)，第二個參數要測試的取值。

```javascript
>>> let 小韻號 = 1919;  // 拯小韻
>>> const is = s => equal音韻地位(小韻號, s);
>>> is('章母');
true
>>> is('清韻賅上去入');
false
>>> is('重紐A類 或 以母 或 端精章組 或 日母');
true
```

`equal音韻地位` 函數：接受一個表示音韻地位的字符串。字符串先以「或」字分隔，再以空格分隔。不支援括號。

如「(見組 且 重紐A類) 或 (以母 且 四等 且 去聲)」可以表示為 `見組 重紐A類 或 以母 四等 去聲`。

## 説明

| 音韻屬性 | 中文名稱 | 英文名稱 | 可能取值 |
| :- | :- | :- | :- |
| 母 | 聲母 | initial | 幫滂並明<br/>端透定泥<br/>知徹澄孃<br/>精清從心邪<br/>莊初崇生俟<br/>章昌船書常<br/>見溪羣疑<br/>影曉匣云以來日 |
| 組 | 組 | group | 幫端知精莊章見<br/>（未涵蓋「影曉匣云以來日」） |
| 等 | 等 | division | 一二三四<br/>1234 |
| 韻 | 韻母 | rhyme | 東冬鍾江…<br/>董湩腫講…<br/>送宋用絳…<br/>屋沃燭覺… |
| 韻賅上去 | 韻母（舉平以賅上去） | rhyme (舉平以賅上去) | 東冬鍾江…<br/>祭泰夬廢<br/>屋沃燭覺… |
| 韻賅上去入 | 韻母（舉平以賅上去入） | rhyme (舉平以賅上去入) | 東冬鍾江…<br/>祭泰夬廢 |
| 攝 | 攝 | class | 通江止遇蟹臻山效果假宕梗曾流深咸 |
| 聲 | 聲調 | tone | 平上去入<br/>仄<br/>舒 |

亦支援「開」、「合」、「重紐A類」、「重紐B類」四項。

説明：

* 「等」既可以使用「1、2、3、4」表示，亦可以使用「一、二、三、四」表示
* 元韻置於臻攝而非山攝

不支援異體字，請手動轉換：

* 聲母 娘 -> 孃
* 聲母 谿 -> 溪
* 聲母 群 -> 羣
* 韻母 餚 -> 肴
* 韻母 眞 -> 真

## License

Dictionary data is in the public domain.

Source code is distributed under MIT license.
